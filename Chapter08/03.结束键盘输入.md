```
Date : 2020 - 02 - 04

Author : Soler HO

Book :C Primer Plus
 
Description :结束键盘输入
```
## 文件、流和键盘输入

### 文件
**文件（file）** 是存储器中储存信息的区域。

文件保存在某种永久存储器中（如硬盘、U盘或DVD等）。

C语言中有许多用于`打开、读取、写入和关闭文件`的库函数。

#### 两个层次去分析：

- 较低层面
  - C可以使用主机操作系统的基本文件工具直接处理文件。
  - 直接调用操作系统的函数叫做`底层I/O（low-level I/O）`。
  - 系统不同，所以不可能为普通的底层创建标准库。
  
- 较高层面
  - 通过标准I/O（standard I/O package）来处理文件。
  - 创建用于处理文件的标准模型和一套I/O函数。

从概念上来讲，C程序处理的是流而不是直接处理文件。

### 流（stream）

流（stream）是一个实际输入或输出映射的理想化数据流。意味着不同的属性和不同种类的输入，由属性更统一的流来表示。

### 文件的结尾
计算机操作系统要以某种方式判断文件的开始和结束。

检测文件结尾的方法：在文件末尾放一个特殊的字符标记文件结尾。

操作系统使用的另一种方法：储存文件大小的信息。

在C语言中，使用`getchar()`读取文件检测结尾时将返回一个特殊的值，即：`EOF（end of file的缩写）`。

scanf()函数检测到文件结尾时也返回EOF。

通常，EOF定义在stdio.h文件中：
```
#define EOF (-1)
```
为什么是-1？

getchar()函数的返回值通常介于0 ～ 127,对应的值都对因相应的字符集。

-1 都不对应任何字符集，所以，使用-1作为标记文件的结尾。

### 文件结尾`EOF`的问题
```
#include<stdio.h>

int main(void)
{
    int ch;

    while((ch = getchar()) != EOF)
        putchar(ch);
    
    return 0;
}
```

程序的解析：
- 不用定义，因为stdio.h中已经定义。
- 不用管EOF的实际值，在stdio.h中用#define预处理器指令定义，可直接使用，不用再编写代码假定EOF为某一个值。







